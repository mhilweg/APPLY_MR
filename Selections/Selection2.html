{{ block title }}
{{ endblock }}

{{ block content }}
<link rel="stylesheet" href="{{static 'css/css.css'}}">
<link rel="stylesheet" href="{{static 'css/modal.css'}}">
<script type="text/javascript" src="{{ static 'js/Script_modal.js' }}"></script>
<script type="text/javascript" src="{{ static 'js/data_quality.js' }}"></script>
<style>
  .centered-table {
    margin-left: auto;
    margin-right: auto;
    border-collapse: separate; /* For spacing between columns */
    border-spacing: 5px; /* Increase spacing between columns */
  }
  /* Fixed width for side columns (left and right) */
  .side-column {
    width: 10%;
    text-align: center;
    font-weight: bold;
  }
  /* Make sure all columns are equal width except the sides */
  .centered-table td {
    text-align: center;
    vertical-align: middle;
  }
  /* Optional: set specific width for main columns to spread out */
  .centered-table td:nth-child(n+2):nth-child(-n+5) {
    width: 15%; /* spread columns evenly, adjust as needed */
  }
  .centered-table td img {
  width: 120px;   /* adjust width as desired */
  height: auto;  /* preserves aspect ratio */
  max-height: 150px; /* optional max height */
}
.select-button {
    background-color: white;
    border: 1px solid #ccc;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
}

.select-button.selected {
    border: 5px solid #0f63fd; /* bold border highlight */
}
</style>

<div class="content-box box-info">

  <!-- Header -->
  <div class="section-header text-center">
    <h3>Selection 2</h3>
    <hr class="section-divider">
  </div>

  <!-- Intro & Timer -->
  <div class="section-box-nonhover box-white">
    <div class="section-header">
      <p>
       Below you will see the workers in group 2 and their score from round 1.
      </p>
      <p>
        Recall that each worker faced either mostly easy or mostly hard sets in round 1.
      </p>
      <p>
        You need to select <b>one worker.</b> If this selection is chosen for payment, you will earn Â£1 if your selected worker achieved the highest score of the group in round 2,
        when all workers faced sets containing only hard pairs.
      </p>

    </div>
  </div>
  <div class="section-box box-calm">
    <div class="section-header">
      <p>Below you will see the workers in group 2 and their corresponding round 2 score.
        Click the button below the worker you would like to select.</p>

      <form id="selectionForm" method="post">

  <input type="hidden" id="Selection2" name="Selection2" value="">
      <table class="centered-table">
  <tr>
    <td class="side-column"></td>
      <td colspan="4" style="text-align:center; text-decoration: underline; font-weight: bold;">
      Group 2
    </td>
    </tr>
        <tr>
    <td class="side-column"></td>
    <td>
      {{ if gender1 == 0 }}<img src="{% static 'graphics/neutral_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender1 == 1 }}<img src="{% static 'graphics/male_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender1 == 2 }}<img src="{% static 'graphics/fem_avatar.png' %}" alt="Avatar">{{ endif }}
    </td>
    <td>
      {{ if gender2 == 0 }}<img src="{% static 'graphics/neutral_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender2 == 1 }}<img src="{% static 'graphics/male_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender2 == 2 }}<img src="{% static 'graphics/fem_avatar.png' %}" alt="Avatar">{{ endif }}
    </td>
    <td>
      {{ if gender3 == 0 }}<img src="{% static 'graphics/neutral_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender3 == 1 }}<img src="{% static 'graphics/male_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender3 == 2 }}<img src="{% static 'graphics/fem_avatar.png' %}" alt="Avatar">{{ endif }}
    </td>
    <td>
      {{ if gender4 == 0 }}<img src="{% static 'graphics/neutral_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender4 == 1 }}<img src="{% static 'graphics/male_avatar.png' %}" alt="Avatar">{{ endif }}
      {{ if gender4 == 2 }}<img src="{% static 'graphics/fem_avatar.png' %}" alt="Avatar">{{ endif }}
    </td>

  </tr>
  <tr>
    <td class="side-column">Round 2 score:</td>
    <td>{{ score1 }}</td>
    <td>{{ score2 }}</td>
    <td>{{ score3 }}</td>
    <td>{{ score4 }}</td>

  </tr>
  <tr>
    <td class="side-column"></td>
    <td><button type="button" class="select-button" data-val="1">Select this <br> worker</button></td>
    <td><button type="button" class="select-button" data-val="2">Select this <br> worker</button></td>
    <td><button type="button" class="select-button" data-val="3">Select this <br> worker</button></td>
    <td><button type="button" class="select-button" data-val="4">Select this <br> worker</button></td>

  </tr>
</table>
  </div>
</div>
  <center>
  <button id="NextButton" class="otree-btn-next btn btn-primary" disabled>Confirm selection</button>
    </center>
</div>

  <!-- Payment Rule Change -->

  <!-- Form Fields -->
    <div style="display:none">
      {% for field in form %}
        {% if field.name in hidden_fields %}
          {{ formfield field.name }}
        {% endif %}
      {% endfor %}
    </div>


  <!-- Instruction & Next Buttons -->
  <div class="buttons-container">
    <div class="instructions-box">
      <p class="instructions-title">Instruction Buttons</p>
      <div class="Instructions">
        <a onclick="open_modal(1)" class="otree-btn-next btn btn-primary">Study Instructions</a>
        <a onclick="open_modal(2)" class="otree-btn-next btn btn-primary">Task Instructions</a>
      </div>
    </div>
  </div>
 </form>
</div>

<!-- Modals -->
<div id="myModal2" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Task Instructions</h2>
      <span class="close" onclick="span_click(2)">&times;</span>
    </div>
    <div class="modal-body">
      {{ include Task_instructions }}
    </div>
  </div>
</div>

<div id="myModal1" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Study Instructions</h2>
      <span class="close" onclick="span_click(1)">&times;</span>
    </div>
    <div class="modal-body">
      {{ include Instructions_path }}
    </div>
  </div>
</div>

<script>
const buttons = document.querySelectorAll('.select-button');
const input = document.getElementById('Selection2');
const confirmBtn = document.getElementById('NextButton');

buttons.forEach(button => {
    button.addEventListener('click', () => {
        // Remove .selected from all buttons
        buttons.forEach(btn => btn.classList.remove('selected'));
        // Add .selected to clicked button
        button.classList.add('selected');
        // Update hidden input value
        input.value = button.getAttribute('data-val');
        // Enable the confirm button
        confirmBtn.disabled = false;
    });
});
</script>
{{ endblock }}
